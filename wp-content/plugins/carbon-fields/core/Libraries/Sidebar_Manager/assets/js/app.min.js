window.carbon=window.carbon||{};(function(b){var a=window.carbon;a.sidebarManager=function(c,f,e){var d=b.ajax({url:ajaxurl,method:"POST",dataType:"json",data:{action:"carbon_"+f+"_sidebar",name:c}});d.done(function(g){if(!g||!g.success){alert(g.error||"An error occurred while trying to "+f+" the sidebar.")}});d.fail(function(g,h){alert("Request failed: "+h)});if(e){d.always(function(){window.location.reload()})}return d};b(document).ready(function(){$addButton=b('<a class="add-new-h2 carbon-btn-add-sidebar" href="#"></a>').text(crbSidebarl10n.add_sidebar);$addButton.on("click",function(d){var c=b.trim(window.prompt(crbSidebarl10n.enter_name_of_new_sidebar));if(c){a.sidebarManager(c,"add",true)}d.preventDefault()});b("body.widgets-php #wpbody-content > .wrap > :first:header").append($addButton);b(".sidebar-carbon-sidebar").each(function(){var d=b(this).find(".widgets-sortables").attr("id");var c=b('<a href="#" class="carbon-btn-remove-sidebar" />');c.on("click",function(f){var e=confirm(crbSidebarl10n.remove_sidebar_confirmation);if(e){a.sidebarManager(d,"remove",true);f.stopPropagation()}f.preventDefault()});b(this).find("> .widgets-sortables > .sidebar-name").append(c)})})}(jQuery));