!function(b){b.PluginManager.add("wptadv",function(a){function h(d){var e="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return d=d.replace(new RegExp("<(?:"+e+")(?: [^>]*)?>","gi"),"\n$&"),d=d.replace(new RegExp("</(?:"+e+")>","gi"),"$&\n"),d=d.replace(/(<br(?: [^>]*)?>)[\r\n\t]*/gi,"$1\n"),d=d.replace(/>\n[\r\n\t]+</g,">\n<"),d=d.replace(/^<li/gm,"	<li"),d=d.replace(/<td>\u00a0<\/td>/g,"<td>&nbsp;</td>"),b.trim(d)}var g=a.settings.tadv_oembed_regex||[new RegExp("https?://(www\\.)?youtube\\.com/(watch|playlist).*","i"),new RegExp("https?://youtu.be/.*","i"),new RegExp("https?://blip.tv/.*","i"),new RegExp("https?://(www\\.)?vimeo\\.com/.*","i"),new RegExp("https?://(www\\.)?dailymotion\\.com/.*","i"),new RegExp("https?://dai.ly/.*","i"),new RegExp("https?://(www\\.)?flickr\\.com/.*","i"),new RegExp("https?://flic.kr/.*","i"),new RegExp("https?://(.+\\.)?smugmug\\.com/.*","i"),new RegExp("https?://(www\\.)?hulu\\.com/watch/.*","i"),new RegExp("https?://(www\\.)?viddler\\.com/.*","i"),new RegExp("https?://qik.com/.*","i"),new RegExp("https?://revision3.com/.*","i"),new RegExp("https?://i*.photobucket.com/albums/.*","i"),new RegExp("https?://gi*.photobucket.com/groups/.*","i"),new RegExp("https?://(www\\.)?scribd\\.com/.*","i"),new RegExp("https?://wordpress.tv/.*","i"),new RegExp("https?://(.+\\.)?polldaddy\\.com/.*","i"),new RegExp("https?://poll\\.fm/.*","i"),new RegExp("https?://(www\\.)?funnyordie\\.com/videos/.*","i"),new RegExp("https?://(www\\.)?twitter\\.com/.+?/status(es)?/.*","i"),new RegExp("https?://vine\\.co/v/.*","i"),new RegExp("https?://(www\\.)?soundcloud\\.com/.*","i"),new RegExp("https?://(www\\.)?slideshare\\.net/.*","i"),new RegExp("https?://instagr(\\.am|am\\.com)/p/.*","i"),new RegExp("https?://(www\\.)?rdio\\.com/.*","i"),new RegExp("https?://rd\\.io/x/.*","i"),new RegExp("https?://(open|play)\\.spotify\\.com/.*","i"),new RegExp("https?://(.+\\.)?imgur\\.com/.*","i"),new RegExp("https?://(www\\.)?meetu(\\.ps|p\\.com)/.*","i"),new RegExp("https?://(www\\.)?issuu\\.com/.+/docs/.*","i"),new RegExp("https?://(www\\.)?collegehumor\\.com/video/.*","i"),new RegExp("https?://(www\\.)?mixcloud\\.com/.*","i"),new RegExp("https?://(www\\.|embed\\.)?ted\\.com/talks/.*","i"),new RegExp("https?://(www\\.)(animoto|video214)\\.com/play/.*","i"),new RegExp("https?://(.+).tumblr.com/post/.*","i"),new RegExp("https?://(www.)?kickstarter.com/projects/.*","i"),new RegExp("https?://kck.st/.*","i")],f=!a.settings.wpautop&&a.settings.tadv_noautop;return a.on("init",function(){f&&a.on("SaveContent",function(d){a.settings.tadv_noautop2&&(d.content=d.content.replace(/<p>\s*(https?:\/\/[^<>\s]+)\s*<\/p>/gi,function(i,e){for(var j in g){if(g[j].test(e)){return e+"\n\n"}}return i})),d.content=d.content.replace(/caption\](\s|<br[^>]*>|<p>&nbsp;<\/p>)*\[caption/g,"caption] [caption"),d.content=d.content.replace(/<(object|audio|video)[\s\S]+?<\/\1>/g,function(e){return e.replace(/[\r\n\t ]+/g," ")}),d.content=d.content.replace(/<pre( [^>]*)?>[\s\S]+?<\/pre>/g,function(e){return e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"\n"),e.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"\n")}),d.content=h(d.content)});try{a.plugins.searchreplace&&!a.controlManager.buttons.searchreplace&&a.shortcuts.remove("meta+f")}catch(c){}}),f&&a.on("beforeSetContent",function(d){var c="undefined"!=typeof window.wp&&window.wp.editor&&window.wp.editor.autop;d.load&&c&&d.content&&d.content.indexOf("\n")>-1&&!/<p>/i.test(d.content)&&(d.content=c(d.content))},!0),a.on("beforeGetContent",function(c){"raw"!==c.format&&a.$('img[id="__wp-temp-img-id"]').attr("id",null)}),{addLineBreaks:h}})}(window.tinymce);