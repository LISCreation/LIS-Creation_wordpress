(function(){var a=(function(){var h=function(y){var z=y;var x=function(){return z};var B=function(C){z=C};var A=function(){return h(x())};return{get:x,set:B,clone:A}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var f=function(x,y){x.fire("VisualBlocks",{state:y})};var n={fireVisualBlocks:f};var s=function(x){return x.getParam("visualblocks_default_state",false)};var i=function(x){return x.settings.visualblocks_content_css};var w={isEnabledByDefault:s,getContentCss:i};var m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var l=tinymce.util.Tools.resolve("tinymce.util.Tools");var o=m.DOM.uniqueId();var j=function(z,x){var y=l.toArray(z.getElementsByTagName("link"));var B=l.grep(y,function(C){return C.id===o});if(B.length===0){var A=m.DOM.create("link",{id:o,rel:"stylesheet",href:x});z.getElementsByTagName("head")[0].appendChild(A)}};var p={load:j};var d=function(y,x,z){var A=y.dom;var B=w.getContentCss(y);p.load(y.getDoc(),B?B:x+"/css/visualblocks.css");A.toggleClass(y.getBody(),"mce-visualblocks");z.set(!z.get());n.fireVisualBlocks(y,z.get())};var u={toggleVisualBlocks:d};var c=function(y,x,z){y.addCommand("mceVisualBlocks",function(){u.toggleVisualBlocks(y,x,z)})};var k={register:c};var q=function(y,x,z){y.on("PreviewFormats AfterPreviewFormats",function(A){if(z.get()){y.dom.toggleClass(y.getBody(),"mce-visualblocks",A.type==="afterpreviewformats")}});y.on("init",function(){if(w.isEnabledByDefault(y)){u.toggleVisualBlocks(y,x,z)}});y.on("remove",function(){y.dom.removeClass(y.getBody(),"mce-visualblocks")})};var g={setup:q};var r=function(x,y){return function(A){var z=A.control;z.active(y.get());x.on("VisualBlocks",function(B){z.active(B.state)})}};var v=function(x,y){x.addButton("visualblocks",{active:false,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:r(x,y)});x.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:r(x,y),selectable:true,context:"view",prependToContext:true})};var b={register:v};t.add("visualblocks",function(y,x){var z=h(false);k.register(y,x,z);b.register(y,z);g.setup(y,x,z)});function e(){}return e}())})();