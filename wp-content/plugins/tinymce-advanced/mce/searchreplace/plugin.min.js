(function(){var a=(function(){var e=function(H){var I=H;var G=function(){return I};var K=function(L){I=L};var J=function(){return e(G())};return{get:G,set:K,clone:J}};var x=tinymce.util.Tools.resolve("tinymce.PluginManager");var l=tinymce.util.Tools.resolve("tinymce.util.Tools");function v(G){return G&&G.nodeType===1&&G.contentEditable==="false"}function z(Q,J,G,W,L){var K;var M=[];var V,P=0,R;var U,H,O;R=J.ownerDocument;U=L.getBlockElements();H=L.getWhiteSpaceElements();O=L.getShortEndedElements();function S(X,Y){Y=Y||0;if(!X[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}var Z=X.index;if(Y>0){var aa=X[Y];if(!aa){throw new Error("Invalid capture group")}Z+=X[0].indexOf(aa);X[0]=aa}return[Z,Z+X[0].length,[X[0]]]}function T(Y){var X;if(Y.nodeType===3){return Y.data}if(H[Y.nodeName]&&!U[Y.nodeName]){return""}X="";if(v(Y)){return"\n"}if(U[Y.nodeName]||O[Y.nodeName]){X+="\n"}if(Y=Y.firstChild){do{X+=T(Y)}while(Y=Y.nextSibling)}return X}function N(aa,ac,ag){var Y,af,ad,Z,ah=[],ae=0,ab=aa,X=ac.shift(),ai=0;out:while(true){if(U[ab.nodeName]||O[ab.nodeName]||v(ab)){ae++}if(ab.nodeType===3){if(!af&&ab.length+ae>=X[1]){af=ab;Z=X[1]-ae}else{if(Y){ah.push(ab)}}if(!Y&&ab.length+ae>X[0]){Y=ab;ad=X[0]-ae}ae+=ab.length}if(Y&&af){ab=ag({startNode:Y,startNodeIndex:ad,endNode:af,endNodeIndex:Z,innerNodes:ah,match:X[2],matchIndex:ai});ae-=af.length-Z;Y=null;af=null;ah=[];X=ac.shift();ai++;if(!X){break}}else{if((!H[ab.nodeName]||U[ab.nodeName])&&ab.firstChild){if(!v(ab)){ab=ab.firstChild;continue}}else{if(ab.nextSibling){ab=ab.nextSibling;continue}}}while(true){if(ab.nextSibling){ab=ab.nextSibling;break}else{if(ab.parentNode!==aa){ab=ab.parentNode}else{break out}}}}}function I(Z){var X;if(typeof Z!=="function"){var Y=Z.nodeType?Z:R.createElement(Z);X=function(ab,aa){var ac=Y.cloneNode(false);ac.setAttribute("data-mce-index",aa);if(ab){ac.appendChild(R.createTextNode(ab))}return ac}}else{X=Z}return function(af){var am;var aa;var ag;var ac=af.startNode;var ai=af.endNode;var ao=af.matchIndex;if(ac===ai){var an=ac;ag=an.parentNode;if(af.startNodeIndex>0){am=R.createTextNode(an.data.substring(0,af.startNodeIndex));ag.insertBefore(am,an)}var ab=X(af.match[0],ao);ag.insertBefore(ab,an);if(af.endNodeIndex<an.length){aa=R.createTextNode(an.data.substring(af.endNodeIndex));ag.insertBefore(aa,an)}an.parentNode.removeChild(an);return ab}am=R.createTextNode(ac.data.substring(0,af.startNodeIndex));aa=R.createTextNode(ai.data.substring(af.endNodeIndex));var ak=X(ac.data.substring(af.startNodeIndex),ao);var aj=[];for(var ae=0,ad=af.innerNodes.length;ae<ad;++ae){var ap=af.innerNodes[ae];var al=X(ap.data,ao);ap.parentNode.replaceChild(al,ap);aj.push(al)}var ah=X(ai.data.substring(0,af.endNodeIndex),ao);ag=ac.parentNode;ag.insertBefore(am,ac);ag.insertBefore(ak,ac);ag.removeChild(ac);ag=ai.parentNode;ag.insertBefore(ah,ai);ag.insertBefore(aa,ai);ag.removeChild(ai);return ah}}V=T(J);if(!V){return}if(Q.global){while(K=Q.exec(V)){M.push(S(K,W))}}else{K=V.match(Q);M.push(S(K,W))}if(M.length){P=M.length;N(J,M,I(G))}return P}var h={findAndReplaceDOMText:z};var f=function(H){var G=H.getAttribute("data-mce-index");if(typeof G==="number"){return""+G}return G};var t=function(I,H,K){var J,G;G=I.dom.create("span",{"data-mce-bogus":1});G.className="mce-match-marker";J=I.getBody();q(I,H,false);return h.findAndReplaceDOMText(K,J,G,false,I.schema)};var w=function(H){var G=H.parentNode;if(H.firstChild){G.insertBefore(H.firstChild,H)}H.parentNode.removeChild(H)};var g=function(K,H){var G;var J=[];G=l.toArray(K.getBody().getElementsByTagName("span"));if(G.length){for(var I=0;I<G.length;I++){var L=f(G[I]);if(L===null||!L.length){continue}if(L===H.toString()){J.push(G[I])}}}return J};var j=function(K,G,H){var J=G.get();var L=K.dom;H=H!==false;if(H){J++}else{J--}L.removeClass(g(K,G.get()),"mce-match-marker-selected");var I=g(K,J);if(I.length){L.addClass(g(K,J),"mce-match-marker-selected");K.selection.scrollIntoView(I[0]);return J}return -1};var y=function(I,H){var G=H.parentNode;I.remove(H);if(I.isEmpty(G)){I.remove(G)}};var r=function(I,G,L,K,H){L=L.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");L=L.replace(/\s/g,"\\s");L=H?"\\b"+L+"\\b":L;var J=t(I,G,new RegExp(L,K?"g":"gi"));if(J){G.set(-1);G.set(j(I,G,true))}return J};var u=function(I,G){var H=j(I,G,true);if(H!==-1){G.set(H)}};var s=function(I,G){var H=j(I,G,false);if(H!==-1){G.set(H)}};var m=function(H){var G=f(H);return G!==null&&G.length>0};var D=function(O,P,S,N,R){var L,G,I,Q,K,M=P.get(),H;N=N!==false;I=O.getBody();G=l.grep(l.toArray(I.getElementsByTagName("span")),m);for(L=0;L<G.length;L++){var J=f(G[L]);Q=K=parseInt(J,10);if(R||Q===P.get()){if(S.length){G[L].firstChild.nodeValue=S;w(G[L])}else{y(O.dom,G[L])}while(G[++L]){Q=parseInt(f(G[L]),10);if(Q===K){y(O.dom,G[L])}else{L--;break}}if(N){M--}}else{if(K>P.get()){G[L].setAttribute("data-mce-index",K-1)}}}P.set(M);if(N){H=k(O,P);u(O,P)}else{H=i(O,P);s(O,P)}return !R&&H};var q=function(L,M,N){var K,H,I,O;H=l.toArray(L.getBody().getElementsByTagName("span"));for(K=0;K<H.length;K++){var J=f(H[K]);if(J!==null&&J.length){if(J===M.get().toString()){if(!I){I=H[K].firstChild}O=H[K].firstChild}w(H[K])}}if(I&&O){var G=L.dom.createRng();G.setStart(I,0);G.setEnd(O,O.data.length);if(N!==false){L.selection.setRng(G)}return G}};var k=function(H,G){return g(H,G.get()+1).length>0};var i=function(H,G){return g(H,G.get()-1).length>0};var F={done:q,find:r,next:u,prev:s,replace:D,hasNext:k,hasPrev:i};var C=function(K,H){var G=function(N){return F.done(K,H,N)};var M=function(P,O,N){return F.find(K,H,P,O,N)};var J=function(){return F.next(K,H)};var L=function(){return F.prev(K,H)};var I=function(P,N,O){return F.replace(K,H,P,N,O)};return{done:G,find:M,next:J,prev:L,replace:I}};var p={get:C};var o=function(I,G){var J={},M;I.undoManager.add();M=l.trim(I.selection.getContent({format:"text"}));function H(){K.statusbar.find("#next").disabled(F.hasNext(I,G)===false);K.statusbar.find("#prev").disabled(F.hasPrev(I,G)===false)}function L(){I.windowManager.alert("Could not find the specified string.",function(){K.find("#find")[0].focus()})}var K=I.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){I.focus();F.done(I,G);I.undoManager.add()},onSubmit:function(Q){var P,N,R,O;Q.preventDefault();N=K.find("#case").checked();O=K.find("#words").checked();R=K.find("#find").value();if(!R.length){F.done(I,G,false);K.statusbar.items().slice(1).disabled(true);return}if(J.text===R&&J.caseState===N&&J.wholeWord===O){if(!F.hasNext(I,G)){L();return}F.next(I,G);H();return}P=F.find(I,G,R,N,O);if(!P){L()}K.statusbar.items().slice(1).disabled(P===0);H();J={text:R,caseState:N,wholeWord:O}},buttons:[{text:"Find",subtype:"primary",onclick:function(){K.submit()}},{text:"Replace",disabled:true,onclick:function(){if(!F.replace(I,G,K.find("#replace").value())){K.statusbar.items().slice(1).disabled(true);G.set(-1);J={}}}},{text:"Replace all",disabled:true,onclick:function(){F.replace(I,G,K.find("#replace").value(),true,true);K.statusbar.items().slice(1).disabled(true);J={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){F.prev(I,G);H()}},{text:"Next",name:"next",disabled:true,onclick:function(){F.next(I,G);H()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:M},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})};var d={open:o};var b=function(H,G){H.addCommand("SearchReplace",function(){d.open(H,G)})};var A={register:b};var n=function(H,G){return function(){d.open(H,G)}};var B=function(H,G){H.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:n(H,G),separator:"before",context:"edit"});H.addButton("searchreplace",{tooltip:"Find and replace",onclick:n(H,G)});H.shortcuts.add("Meta+F","",n(H,G))};var E={register:B};x.add("searchreplace",function(H){var G=e(-1);A.register(H,G);E.register(H,G);return p.get(H,G)});function c(){}return c}())})();