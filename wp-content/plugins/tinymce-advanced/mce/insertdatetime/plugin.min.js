(function(){var a=(function(){var k=function(A){var B=A;var z=function(){return B};var D=function(E){B=E};var C=function(){return k(z())};return{get:z,set:D,clone:C}};var s=tinymce.util.Tools.resolve("tinymce.PluginManager");var n=function(z){return z.getParam("insertdatetime_dateformat",z.translate("%Y-%m-%d"))};var l=function(z){return z.getParam("insertdatetime_timeformat",z.translate("%H:%M:%S"))};var y=function(z){return z.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])};var x=function(A){var z=y(A);return z.length>0?z[0]:l(A)};var t=function(z){return z.getParam("insertdatetime_element",false)};var g={getDateFormat:n,getTimeFormat:l,getFormats:y,getDefaultDateTime:x,shouldInsertTimeElement:t};var i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" ");var b="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ");var c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");var p="January February March April May June July August September October November December".split(" ");var r=function(B,z){B=""+B;if(B.length<z){for(var A=0;A<z-B.length;A++){B="0"+B}}return B};var j=function(B,z,A){A=A||new Date();z=z.replace("%D","%m/%d/%Y");z=z.replace("%r","%I:%M:%S %p");z=z.replace("%Y",""+A.getFullYear());z=z.replace("%y",""+A.getYear());z=z.replace("%m",r(A.getMonth()+1,2));z=z.replace("%d",r(A.getDate(),2));z=z.replace("%H",""+r(A.getHours(),2));z=z.replace("%M",""+r(A.getMinutes(),2));z=z.replace("%S",""+r(A.getSeconds(),2));z=z.replace("%I",""+((A.getHours()+11)%12+1));z=z.replace("%p",""+(A.getHours()<12?"AM":"PM"));z=z.replace("%B",""+B.translate(p[A.getMonth()]));z=z.replace("%b",""+B.translate(c[A.getMonth()]));z=z.replace("%A",""+B.translate(b[A.getDay()]));z=z.replace("%a",""+B.translate(i[A.getDay()]));z=z.replace("%%","%");return z};var v=function(C,D,A,z){var B=C.dom.create("time",{datetime:A},z);D.parentNode.insertBefore(B,D);C.dom.remove(D);C.selection.select(B,true);C.selection.collapse(false)};var q=function(B,C){if(g.shouldInsertTimeElement(B)){var z=j(B,C);var A=void 0;if(/%[HMSIp]/.test(C)){A=j(B,"%Y-%m-%dT%H:%M")}else{A=j(B,"%Y-%m-%d")}var D=B.dom.getParent(B.selection.getStart(),"time");if(D){v(B,D,A,z)}else{B.insertContent('<time datetime="'+A+'">'+z+"</time>")}}else{B.insertContent(j(B,C))}};var u={insertDateTime:q,getDateTime:j};var d=function(z){z.addCommand("mceInsertDate",function(){u.insertDateTime(z,g.getDateFormat(z))});z.addCommand("mceInsertTime",function(){u.insertDateTime(z,g.getTimeFormat(z))})};var o={register:d};var m=tinymce.util.Tools.resolve("tinymce.util.Tools");var h=function(A,B){var z=g.getFormats(A);return m.map(z,function(C){return{text:u.getDateTime(A,C),onclick:function(){B.set(C);u.insertDateTime(A,C)}}})};var w=function(A,B){var z=h(A,B);A.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:z,onclick:function(){var C=B.get();u.insertDateTime(A,C?C:g.getDefaultDateTime(A))}});A.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:z,context:"insert"})};var f={register:w};s.add("insertdatetime",function(z){var A=k(null);o.register(z);f.register(z,A)});function e(){}return e}())})();